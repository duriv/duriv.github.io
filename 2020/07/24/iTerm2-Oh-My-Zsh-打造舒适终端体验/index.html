<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>iTerm2 + Oh My Zsh 打造舒适终端体验 | 微雪的程序人生</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="最终效果图：">
<meta property="og:type" content="article">
<meta property="og:title" content="iTerm2 + Oh My Zsh 打造舒适终端体验">
<meta property="og:url" content="https://duriv.github.io/2020/07/24/iTerm2-Oh-My-Zsh-%E6%89%93%E9%80%A0%E8%88%92%E9%80%82%E7%BB%88%E7%AB%AF%E4%BD%93%E9%AA%8C/index.html">
<meta property="og:site_name" content="微雪的程序人生">
<meta property="og:description" content="最终效果图：">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/14.png">
<meta property="og:image" content="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/1.png">
<meta property="og:image" content="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/2.png">
<meta property="og:image" content="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/3.png">
<meta property="og:image" content="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/4.png">
<meta property="og:image" content="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/5.png">
<meta property="og:image" content="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/6.png">
<meta property="og:image" content="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/7.png">
<meta property="og:image" content="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/8.png">
<meta property="og:image" content="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/9.png">
<meta property="og:image" content="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/10.png">
<meta property="og:image" content="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/11.png">
<meta property="og:image" content="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/12.png">
<meta property="og:image" content="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/13.png">
<meta property="og:image" content="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/14.png">
<meta property="og:image" content="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/15.png">
<meta property="og:image" content="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/16.png">
<meta property="article:published_time" content="2020-07-23T16:48:18.000Z">
<meta property="article:modified_time" content="2020-08-24T06:47:13.606Z">
<meta property="article:author" content="浮生微雪">
<meta property="article:tag" content="Mac">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/14.png">
  
    <link rel="alternate" href="/atom.xml" title="微雪的程序人生" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.0.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">微雪的程序人生</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://duriv.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-iTerm2-Oh-My-Zsh-打造舒适终端体验" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/24/iTerm2-Oh-My-Zsh-%E6%89%93%E9%80%A0%E8%88%92%E9%80%82%E7%BB%88%E7%AB%AF%E4%BD%93%E9%AA%8C/" class="article-date">
  <time datetime="2020-07-23T16:48:18.000Z" itemprop="datePublished">2020-07-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Mac%E4%BC%98%E5%8C%96/">Mac优化</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      iTerm2 + Oh My Zsh 打造舒适终端体验
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最终效果图：</p>
<p><a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/14.png"><img src="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/14.png" alt="ImageInitIterm"></a></p>
<a id="more"></a>

<p>本文严重抄袭自：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/7de00c73a2bb">https://www.jianshu.com/p/7de00c73a2bb</a></p>
<p>因排版和原文中的一些bug，参照搜索引擎和原文有了本篇文章。</p>
<p>因为powerline以及homebrew均需要安装command line tool，网络条件优越的同学在执行本文下面内容之前，可以先安装XCode并打开运行一次（会初始化安装components），省去以后在iterm2中的等待时间。</p>
<p>另外，git也是必要的，各位可以自行下载安装，除了网络没有任何坑：</p>
<p><a target="_blank" rel="noopener" href="https://git-scm.com/">https://git-scm.com</a></p>
<p>介于此，本文默认各位同学已经安装了git环境和xcode（command line tools），遇到提示找不到git命令或需要安装command line tool的地方，文中不再赘述了。</p>
<h3 id="下载iTerm2"><a href="#下载iTerm2" class="headerlink" title="下载iTerm2"></a>下载iTerm2</h3><p>可以直接去官网下载：<a target="_blank" rel="noopener" href="https://www.iterm2.com/">https://www.iterm2.com/</a></p>
<p>安装完成后，在/bin目录下会多出一个zsh的文件。</p>
<p>Mac系统默认使用dash作为终端，可以使用命令修改默认使用zsh：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chsh -s &#x2F;bin&#x2F;zsh</span><br></pre></td></tr></table></figure>

<p>如果想修改回默认dash，同样使用chsh命令即可：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chsh -s &#x2F;bin&#x2F;bash</span><br></pre></td></tr></table></figure>

<p>OK，这就是iTerm2初始的样子，下面我们来美化它，让它变得更好用！</p>
<p><a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/1.png"><img src="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/1.png" alt="ImageInitIterm"></a></p>
<h3 id="安装Oh-my-zsh"><a href="#安装Oh-my-zsh" class="headerlink" title="安装Oh my zsh"></a>安装Oh my zsh</h3><p>安装方法有两种，可以使用curl或wget，看自己环境或喜好：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># curl 安装方式</span><br><span class="line">sh -c &quot;$(curl -fsSL https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;robbyrussell&#x2F;oh-my-zsh&#x2F;master&#x2F;tools&#x2F;install.sh)&quot;</span><br><span class="line"># wget 安装方式</span><br><span class="line">sh -c &quot;$(wget https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;robbyrussell&#x2F;oh-my-zsh&#x2F;master&#x2F;tools&#x2F;install.sh -O -)&quot;</span><br></pre></td></tr></table></figure>

<p>安装命令和安装完成后的截图：</p>
<p><a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/2.png"><img src="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/2.png" alt="ImageInitIterm"></a></p>
<p>oh-my-zsh开源地址：<a target="_blank" rel="noopener" href="https://github.com/robbyrussell/oh-my-zsh">https://github.com/robbyrussell/oh-my-zsh</a></p>
<h3 id="安装PowerLine"><a href="#安装PowerLine" class="headerlink" title="安装PowerLine"></a>安装PowerLine</h3><p>Powerline是agnoster主题的依赖。具体可以在repo里查询到： <a target="_blank" rel="noopener" href="https://github.com/agnoster/agnoster-zsh-theme">https://github.com/agnoster/agnoster-zsh-theme</a></p>
<p>powerline官网：<a target="_blank" rel="noopener" href="http://powerline.readthedocs.io/en/latest/installation.html">http://powerline.readthedocs.io/en/latest/installation.html</a></p>
<p>安装powerline的方式依然简单，也只需要一条命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install powerline-status --user</span><br></pre></td></tr></table></figure>

<p>没有安装pip的同学可能会碰到zsh: command not found: pip。</p>
<p><a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/3.png"><img src="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/3.png" alt="ImageInitIterm"></a></p>
<p>使用命令安装pip即可：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo easy_install pip</span><br></pre></td></tr></table></figure>

<p>安装后再次执行安装powerline的命令即可。</p>
<p><a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/4.png"><img src="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/4.png" alt="ImageInitIterm"></a></p>
<h3 id="安装PowerFonts"><a href="#安装PowerFonts" class="headerlink" title="安装PowerFonts"></a>安装PowerFonts</h3><p>安装字体库需要首先将项目git clone至本地，然后执行源码中的install.sh。</p>
<p>在你习惯的位置新建一个文件夹，如：~/Desktop/OpenSource/</p>
<p><a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/5.png"><img src="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/5.png" alt="ImageInitIterm"></a></p>
<p>在此文件夹下执行git clone命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># git clone</span><br><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;powerline&#x2F;fonts.git --depth&#x3D;1</span><br><span class="line"># cd to folder</span><br><span class="line">cd fonts</span><br><span class="line"># run install shell</span><br><span class="line">.&#x2F;install.sh</span><br></pre></td></tr></table></figure>

<p>执行结果如下：</p>
<p><a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/6.png"><img src="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/6.png" alt="ImageInitIterm"></a></p>
<p>安装好字体库之后，我们来设置iTerm2的字体，具体的操作是iTerm2 -&gt; Preferences -&gt; Profiles -&gt; Text，在Font区域选中Change Font，然后找到Meslo LG字体。有L、M、S可选，看个人喜好：</p>
<p><a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/7.png"><img src="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/7.png" alt="ImageInitIterm"></a></p>
<h3 id="安装配色方案"><a href="#安装配色方案" class="headerlink" title="安装配色方案"></a>安装配色方案</h3><p>配色方案在使用VIM或Colorful Log时会变得非常有用，同时界面也不会一片黑绿一样死板。</p>
<p>同样使用git clone的方式下载源码进行安装：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd ~&#x2F;Desktop&#x2F;OpenSource</span><br><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;altercation&#x2F;solarized</span><br><span class="line">cd solarized&#x2F;iterm2-colors-solarized&#x2F;</span><br><span class="line">open .</span><br></pre></td></tr></table></figure>

<p>在打开的finder窗口中，双击Solarized Dark.itermcolors和Solarized Light.itermcolors即可安装明暗两种配色：</p>
<p><a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/8.png"><img src="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/8.png" alt="ImageInitIterm"></a></p>
<p>再次进入iTerm2 -&gt; Preferences -&gt; Profiles -&gt; Colors -&gt; Color Presets中根据个人喜好选择这两种配色中的一种即可：</p>
<p><a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/9.png"><img src="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/9.png" alt="ImageInitIterm"></a></p>
<h3 id="安装主题"><a href="#安装主题" class="headerlink" title="安装主题"></a>安装主题</h3><p>下载agnoster主题，执行脚本安装：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd ~&#x2F;Desktop&#x2F;OpenSource</span><br><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;fcamblor&#x2F;oh-my-zsh-agnoster-fcamblor.git</span><br><span class="line">cd oh-my-zsh-agnoster-fcamblor&#x2F;</span><br><span class="line">.&#x2F;install</span><br></pre></td></tr></table></figure>

<p>执行上面的命令会将主题拷贝到oh my zsh的themes中：</p>
<p><a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/10.png"><img src="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/10.png" alt="ImageInitIterm"></a></p>
<p>拷贝完成后，执行命令打开zshrc配置文件，将ZSH_THEME后面的字段改为agnoster。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi ~&#x2F;.zshrc</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/11.png"><img src="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/11.png" alt="ImageInitIterm"></a></p>
<p>修改完成后按一下esc调出vi命令，输入:wq保存并退出vi模式。</p>
<p>此时command+Q或source配置文件后，iTerm2变了模样：</p>
<p><a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/12.png"><img src="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/12.png" alt="ImageInitIterm"></a></p>
<h3 id="安装高亮插件"><a href="#安装高亮插件" class="headerlink" title="安装高亮插件"></a>安装高亮插件</h3><p>这是oh my zsh的一个插件，安装方式与theme大同小异：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd ~&#x2F;.oh-my-zsh&#x2F;custom&#x2F;plugins&#x2F;</span><br><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;zsh-users&#x2F;zsh-syntax-highlighting.git</span><br><span class="line">vi ~&#x2F;.zshrc</span><br></pre></td></tr></table></figure>

<p>这时我们再次打开zshrc文件进行编辑。找到plugins，此时plugins中应该已经有了git，我们需要把高亮插件也加上：</p>
<p><a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/13.png"><img src="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/13.png" alt="ImageInitIterm"></a></p>
<p>请务必保证插件顺序，zsh-syntax-highlighting必须在最后一个。</p>
<p>然后在文件的最后一行添加：source ~/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh</p>
<p>按一下esc调出vi命令，输入:wq保存并退出vi模式。</p>
<p>执行命令使刚才的修改生效：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~&#x2F;.zshrc</span><br></pre></td></tr></table></figure>

<p>至此大功告成，请看最终效果图：</p>
<p><a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/14.png"><img src="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/14.png" alt="ImageInitIterm"></a></p>
<p>背景图片取自微软Surface Studio的4K壁纸(将近12MB大小)，非常漂亮，需要的可以自取：</p>
<p><a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1LKd4ghGyyNI6UwHhOHvfaA">https://pan.baidu.com/s/1LKd4ghGyyNI6UwHhOHvfaA</a> 提取码: snrd</p>
<p>更换背景图片方式：iTerm2 -&gt; Preferences -&gt; Profiles -&gt; Window -&gt; BackGround Image勾选图片即可。</p>
<h4 id="可选择、命令补全"><a href="#可选择、命令补全" class="headerlink" title="可选择、命令补全"></a>可选择、命令补全</h4><p>跟代码高亮的安装方式一样，这也是一个zsh的插件，叫做zsh-autosuggestion，用于命令建议和补全。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd ~&#x2F;.oh-my-zsh&#x2F;custom&#x2F;plugins&#x2F;</span><br><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;zsh-users&#x2F;zsh-autosuggestions</span><br><span class="line">vi ~&#x2F;.zshrc</span><br></pre></td></tr></table></figure>

<p>找到plugins，加上这个插件即可：</p>
<p><a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/15.png"><img src="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/15.png" alt="ImageInitIterm"></a></p>
<p>插件效果：</p>
<p><a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/16.png"><img src="https://raw.githubusercontent.com/sirius1024/pubimgs/master/blogs/iterm2/16.png" alt="ImageInitIterm"></a></p>
<p>有同学说补全命令的字体不太清晰，与背景颜色太过相近，其实可以自己调整一下字体颜色。</p>
<p>Preferences -&gt; Profiles -&gt; Colors 中有Foreground是标准字体颜色，ANSI Colors中Bright的第一个是补全的字体颜色。</p>
<h1 id="oh-my-zsh-提示检测到不安全的完成相关目录"><a href="#oh-my-zsh-提示检测到不安全的完成相关目录" class="headerlink" title="[oh-my-zsh] 提示检测到不安全的完成相关目录"></a>[oh-my-zsh] 提示检测到不安全的完成相关目录</h1><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>运行命令时，[oh-my-zsh] 冒出下面一大堆提示：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[oh-my-zsh] Insecure completion-dependent directories detected:</span><br><span class="line">drwxr-xr-x   16 duke  staff   512 Jul 14 10:14 /Users/duke/.oh-my-zsh</span><br><span class="line">drwxr-xr-x  250 duke  staff  8000 Jul 14 10:14 /Users/duke/.oh-my-zsh/plugins</span><br><span class="line">drwxr-xr-x    4 duke  staff   128 Jul 14 10:14 /Users/duke/.oh-my-zsh/plugins/git</span><br><span class="line">drwxr-xr-x    3 duke  staff    96 Jun 17 11:33 /usr/<span class="built_in">local</span>/share/zsh</span><br><span class="line">drwxr-xr-x    6 duke  staff   192 Oct  3 10:04 /usr/<span class="built_in">local</span>/share/zsh/site-functions</span><br><span class="line">lrwxr-xr-x    1 duke  staff    39 Jun 17 11:37 /usr/<span class="built_in">local</span>/share/zsh/site-functions/_brew -&gt; ../../../Homebrew/completions/zsh/_brew</span><br><span class="line">lrwxr-xr-x    1 duke  staff    44 Jun 17 11:37 /usr/<span class="built_in">local</span>/share/zsh/site-functions/_brew_cask -&gt; ../../../Homebrew/completions/zsh/_brew_cask</span><br><span class="line">lrwxr-xr-x    1 duke  staff    58 Oct  3 10:04 /usr/<span class="built_in">local</span>/share/zsh/site-functions/_git -&gt; ../../../Cellar/git/2.19.0_2/share/zsh/site-functions/_git</span><br><span class="line"></span><br><span class="line">[oh-my-zsh] For safety, we will not load completions from these directories until</span><br><span class="line">[oh-my-zsh] you fix their permissions and ownership and restart zsh.</span><br><span class="line">[oh-my-zsh] See the above list <span class="keyword">for</span> directories with group or other writability.</span><br><span class="line"></span><br><span class="line">[oh-my-zsh] To fix your permissions you can <span class="keyword">do</span> so by disabling</span><br><span class="line">[oh-my-zsh] the write permission of <span class="string">&quot;group&quot;</span> and <span class="string">&quot;others&quot;</span> and making sure that the</span><br><span class="line">[oh-my-zsh] owner of these directories is either root or your current user.</span><br><span class="line">[oh-my-zsh] The following <span class="built_in">command</span> may <span class="built_in">help</span>:</span><br><span class="line">[oh-my-zsh]     compaudit | xargs chmod g-w,o-w</span><br><span class="line"></span><br><span class="line">[oh-my-zsh] If the above didn<span class="string">&#x27;t help or you want to skip the verification of</span></span><br><span class="line"><span class="string">[oh-my-zsh] insecure directories you can set the variable ZSH_DISABLE_COMPFIX to</span></span><br><span class="line"><span class="string">[oh-my-zsh] &quot;true&quot; before oh-my-zsh is sourced in your zshrc file.</span></span><br></pre></td></tr></table></figure>

<h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><p>问题的描述中，其实已经给了我们解决方法：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[oh-my-zsh] <span class="type">To</span> fix your permissions you can <span class="keyword">do</span> so by disabling</span><br><span class="line">[oh-my-zsh] the write permission of <span class="string">&quot;group&quot;</span> and <span class="string">&quot;others&quot;</span> and making sure that the</span><br><span class="line">[oh-my-zsh] owner of these directories <span class="keyword">is</span> either root or your current user.</span><br><span class="line">[oh-my-zsh] <span class="type">The</span> following command may help:</span><br><span class="line">[oh-my-zsh]     compaudit | xargs chmod g-w,o-w</span><br><span class="line"></span><br><span class="line">[oh-my-zsh] <span class="type">If</span> the above didn&#x27;t help or you want to skip the verification of</span><br><span class="line">[oh-my-zsh] insecure directories you can <span class="keyword">set</span> the variable <span class="type">ZSH_DISABLE_COMPFIX</span> to</span><br><span class="line">[oh-my-zsh] <span class="string">&quot;true&quot;</span> before oh-my-zsh <span class="keyword">is</span> sourced <span class="keyword">in</span> your zshrc file.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>要修复权限，可以通过禁用“group”和“others”的写入权限并确保这些目录的所有者是root用户或当前用户来修复权限。<br>以下命令可能有所帮助：<br>compaudit | xargs chmod g-w，o-w<br>如果上面没有帮助，或者你想跳过不安全目录的验证，你可以在你的zshrc文件中找到oh-my-zsh之前将变量ZSH_DISABLE_COMPFIX设置为“true”。</p>
</blockquote>
<h3 id="第一种解决方法：修改相关文件夹权限"><a href="#第一种解决方法：修改相关文件夹权限" class="headerlink" title="第一种解决方法：修改相关文件夹权限"></a>第一种解决方法：修改相关文件夹权限</h3><p>为以上提示的文件夹修改权限（根据具体提示修改）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">chmod 755 /Users/duke/.oh-my-zsh</span><br><span class="line">chmod 755 /Users/duke/.oh-my-zsh/plugins</span><br><span class="line">chmod 755 /Users/duke/.oh-my-zsh/plugins/git</span><br><span class="line">chmod 755 /usr/<span class="built_in">local</span>/share/zsh/site-functions</span><br><span class="line">chmod 755 /usr/<span class="built_in">local</span>/share/zsh/site-functions/_brew</span><br><span class="line">chmod 755 /usr/<span class="built_in">local</span>/share/zsh/site-functions/_brew_cask</span><br><span class="line">chmod 755 /usr/<span class="built_in">local</span>/share/zsh/site-functions/_git</span><br></pre></td></tr></table></figure>

<h3 id="第二种解决方法：设置变量-ZSH-DISABLE-COMPFIX-true"><a href="#第二种解决方法：设置变量-ZSH-DISABLE-COMPFIX-true" class="headerlink" title="第二种解决方法：设置变量 ZSH_DISABLE_COMPFIX=true"></a>第二种解决方法：设置变量 ZSH_DISABLE_COMPFIX=true</h3><ol>
<li>在.zshrc文件的第一行添加 <code>ZSH_DISABLE_COMPFIX=true</code></li>
<li>运行source命令，重新加载.zshrc文件</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.zshrc</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://duriv.github.io/2020/07/24/iTerm2-Oh-My-Zsh-%E6%89%93%E9%80%A0%E8%88%92%E9%80%82%E7%BB%88%E7%AB%AF%E4%BD%93%E9%AA%8C/" data-id="cke8ce0tv000xh8tqd8wp1tr7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Mac/" rel="tag">Mac</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/08/01/Java%E5%9F%BA%E7%A1%80/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Java基础面试题
        
      </div>
    </a>
  
  
    <a href="/2020/01/01/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Hello World</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Mac%E4%BC%98%E5%8C%96/">Mac优化</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java%E9%9D%A2%E8%AF%95%E9%A2%98/">java面试题</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mac/" rel="tag">Mac</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/" rel="tag">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A2%8E%E7%A2%8E%E5%BF%B5/" rel="tag">碎碎念</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Mac/" style="font-size: 10px;">Mac</a> <a href="/tags/java/" style="font-size: 20px;">java</a> <a href="/tags/%E7%A2%8E%E7%A2%8E%E5%BF%B5/" style="font-size: 10px;">碎碎念</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/08/30/%E5%A6%82%E6%9E%9C%E6%88%91%E5%8F%AF%E4%BB%A5%E6%AD%BB/">如果我可以死</a>
          </li>
        
          <li>
            <a href="/2020/08/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E9%9D%A2%E8%AF%95%E9%A2%98/">计算机网络面试题</a>
          </li>
        
          <li>
            <a href="/2020/08/19/Linux%E9%9D%A2%E8%AF%95%E9%A2%98/">Linux面试题</a>
          </li>
        
          <li>
            <a href="/2020/08/18/Mybatis/">Mybatis知识点</a>
          </li>
        
          <li>
            <a href="/2020/08/17/MySQL%E9%9D%A2%E8%AF%95%E9%A2%98/">MySQl面试题</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 浮生微雪<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>